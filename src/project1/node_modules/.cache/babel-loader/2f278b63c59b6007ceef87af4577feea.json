{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport Route from '../router/index';\nimport axios from 'axios';\nimport router from '../router/index';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    Userinfo: {\n      User_Id: null,\n      User_Name: null,\n      User_auth: [],\n      User_token: null\n    },\n    boardlist: [],\n    board: [{\n      bTitle: ' ',\n      bContent: ' '\n    }],\n    UserList: [],\n    article: [],\n    SurveyList: [],\n    Survey: {\n      sTitle: '',\n      sDescription: '',\n      questions: []\n    },\n    SurveyDetail: {\n      sId: '',\n      sTitle: '',\n      sDescription: '',\n      sWriter: '',\n      sDatetime: '',\n      questions: []\n    },\n    Answers: {\n      sId: '',\n      questions: []\n    },\n    Response: {\n      sId: '',\n      questions: []\n    }\n  },\n  mutations: {\n    NewUsers: function NewUsers(state, payload) {\n      state.UserList.push(payload);\n      Route.push(\"/login\");\n    },\n    SET_USER: function SET_USER(state, data) {\n      state.Userinfo.User_Id = data.username;\n      state.Userinfo.User_Name = data.name;\n      state.Userinfo.User_auth = data.authorities;\n      state.Userinfo.User_token = data.token;\n      Route.push(\"/user\");\n    },\n    READ_USER_LIST: function READ_USER_LIST(state, data) {\n      state.UserList = data;\n    },\n    WRITE: function WRITE(state, data) {\n      state.Userinfo = data;\n    },\n    READ_BOARD_LIST: function READ_BOARD_LIST(state, data) {\n      state.boardlist = data;\n    },\n    READ_ARTICLE: function READ_ARTICLE(state, data) {\n      state.article.bId = data.bId;\n      state.article = data;\n      console.log(state.article);\n    },\n    READ_SURVEY_LIST: function READ_SURVEY_LIST(state, data) {\n      state.surveylist = data;\n    },\n    INSERT_TOKEN: function INSERT_TOKEN(state) {\n      state.Userinfo.User_token = localStorage.getItem(\"token\");\n    },\n    SET_USER_REFRESH: function SET_USER_REFRESH(state, data) {\n      state.Userinfo.User_Id = data.username;\n      state.Userinfo.User_Name = data.name;\n      state.Userinfo.User_auth = data.authorities;\n      state.Userinfo.User_token = data.token;\n    },\n    logout: function logout(state) {\n      state.Userinfo.User_Id = null;\n      state.Userinfo.User_Name = null;\n      state.Userinfo.User_auth = null;\n      state.Userinfo.User_token = null;\n      localStorage.removeItem(\"token\");\n      console.log(state.Userinfo);\n      console.log(\"Logout\" + localStorage.getItem(\"token\"));\n    },\n    getSurveyList: function getSurveyList(state, data) {\n      state.SurveyList = data;\n    },\n    updateAnswer: function updateAnswer(state, data) {\n      state.Survey.questions[data.qindex].answers[data.index].answer = data.value;\n    },\n    updateQuestion: function updateQuestion(state, data) {\n      state.Survey.questions[data.index].q = data.value;\n    },\n    updatesTitle: function updatesTitle(state, data) {\n      state.Survey.sTitle = data;\n    },\n    updatesDescription: function updatesDescription(state, data) {\n      state.Survey.sDescription = data;\n    },\n    updateOptions: function updateOptions(state, data) {\n      state.Survey.questions[data.index].answers = data.value;\n    },\n    GET_SURVEYDETAIL: function GET_SURVEYDETAIL(state, data) {\n      state.SurveyDetail = data;\n    },\n    update_S_num: function update_S_num(state, data) {\n      state.Answers.sId = data;\n    },\n    update_SingleAnswer: function update_SingleAnswer(state, data) {\n      state.Answers.questions[data.index].answers[0] = data.value;\n    },\n    update_MultipleAnswer: function update_MultipleAnswer(state, data) {\n      state.Answers.questions[data.index].answers = data.value;\n    },\n    GET_SURVEYRESULTS: function GET_SURVEYRESULTS(state, data) {\n      state.Response.sId = data.sId;\n      state.Response.questions = data.questions;\n    }\n  },\n  actions: {\n    loginProcess: function loginProcess(_ref, payload) {\n      var commit = _ref.commit;\n      console.log(payload);\n      return new Promise(function (resolve, reject) {\n        axios.post('http://localhost:9000/api/auth/signin', payload).then(function (Response) {\n          console.log(Response.data);\n\n          if (Response.data.username != null) {\n            axios.defaults.headers.common['Authorization'] = \"Bearer \".concat(Response.data.token);\n            localStorage.setItem(\"token\", Response.data.token);\n            commit('SET_USER', Response.data);\n          }\n        }).catch(function (Error) {\n          console.log('error');\n          reject(Error);\n        });\n      });\n    },\n    SignUp: function SignUp(_ref2, payload) {\n      var commit = _ref2.commit;\n      console.log(payload);\n      return new Promise(function (resolve, reject) {\n        axios.post('http://localhost:9000/api/auth/signup', payload).then(function (Response) {\n          console.log(Response.data);\n\n          if (Response.data === \"success\") {\n            Route.push(\"/login\");\n          }\n        }).catch(function (Error) {\n          console.log('error');\n          reject(Error);\n          alert(\"아이디가 중복\");\n          Route.push(\"/signup\");\n        });\n      });\n    },\n    admin: function admin(_ref3) {\n      var commit = _ref3.commit,\n          state = _ref3.state;\n      return new Promise(function (resolve, reject) {\n        axios.defaults.headers.common['Authorization'] = \"Bearer \".concat(state.Userinfo.User_token);\n        axios.get('http://localhost:9000/api/admin/adminPage').then(function (Response) {\n          console.log(Response.data);\n          commit('READ_USER_LIST', Response.data);\n        }).catch(function (Error) {\n          // console.log(Error)\n          console.log('admin_error');\n          Route.push(\"/\");\n        });\n      });\n    },\n    board: function board(_ref4, payload) {\n      var commit = _ref4.commit;\n      return new Promise(function (resolve, reject) {\n        axios.get('http://localhost:9000/api/board', payload).then(function (Response) {\n          console.log(Response.data);\n          commit('READ_BOARD_LIST', Response.data);\n        }).catch(function (Error) {\n          console.log('error');\n          reject(Error);\n        });\n      });\n    },\n    Survey: function Survey(_ref5) {\n      var commit = _ref5.commit;\n      return new Promise(function (resolve, reject) {\n        axios.get('https://localhost:9000/api/survey', payload).then(function (Response) {\n          console.log(Response.data);\n          commit('GET_SURVEY_LIST', Response.data);\n        }).catch(function (Error) {\n          console.log('error');\n          reject(Error);\n        });\n      });\n    },\n    CreateSurvey: function CreateSurvey(_ref6) {\n      var state = _ref6.state,\n          commit = _ref6.commit;\n      return new Promise(function (resolve, reject) {\n        console.log(state.Survey);\n        axios.defaults.headers.common['Authorization'] = \"Bearer \".concat(localStorage.getItem(\"token\"));\n        axios.post('http://localhost:9010/api/auth/survey', state.Survey).then(function (Response) {\n          commit('GET_SURVEYLIST', Response.data);\n          Route.push(\"/surveylist\");\n        }).catch(function (Error) {\n          reject(Error);\n          console.log('CreateSurvey_error');\n        });\n      });\n    },\n    article: function article(_ref7, payload) {\n      var commit = _ref7.commit;\n      //var obj= {bId: router.currentRoute.params.bId}\n      //payload = obj\n      console.log(payload);\n      return new Promise(function (resolve, reject) {\n        axios.get('http://localhost:9000/api/article', payload).then(function (Response) {\n          console.log(Response.data);\n          commit('READ_ARTICLE', Response.data);\n        }).catch(function (Error) {\n          console.log('error');\n          reject(Error);\n        });\n      });\n    },\n\n    /*writeaction({commit},payload) {\n      console.log(payload)\n     // let formData= new FormData()\n      //formData.append('bTitle', payload.bTitle)\n      //formData.append('bContent', payload.bContent)\n      //formData.append('file', payload.fileinput)\n      //console.log(formData) \n      return new Promise((resolve, reject) => {\n        axios.post('http://localhost:9000/api/writeaction',\n         payload \n        )\n          .then(Response => {\n            console.log(Response.data)\n            alert('게시글이 등록되었습니다.')\n           .then(() => Route.push({name : 'board'}))\n          })\n          .catch(Error => {\n            console.log('error')\n            reject(Error)\n            alert('게시글 등록 실패')\n          })\n      })\n    },*/\n    writeaction: function writeaction(_ref8, payload) {\n      var commit = _ref8.commit;\n      console.log(payload);\n      var formData = new FormData();\n      formData.append('bTitle', payload.bTitle);\n      formData.append('bContent', payload.bContent); //formData.append('file', payload.fileinput)\n\n      console.log(formData);\n      return new Promise(function (resolve, reject) {\n        axios({\n          url: \"http://localhost:9000/api/writeaction\",\n          method: \"post\",\n          headers: {\n            \"Content-Type\": \"multipart/formdata; boundary = \" + new Date().getTime()\n          },\n          data: formData\n        }).then(function (Response) {\n          console.log(Response.data);\n          alert('게시글이 등록되었습니다.').then(function () {\n            return Route.push({\n              name: 'board'\n            });\n          });\n        }).catch(function (Error) {\n          console.log('error');\n          reject(Error);\n          alert('게시글 등록 실패');\n        });\n      });\n    },\n\n    /* axios.post('http://localhost:9000/api/writeaction', formData, {\n              headers: {\n                \"Content-Type\": \"multipart/form-data; boundary = \" + new Date().getTime()\n              }\n          }) */\n    UnpackToken: function UnpackToken(_ref9) {\n      var commit = _ref9.commit;\n      return new Promise(function (resolve, reject) {\n        axios.defaults.headers.common['Authorization'] = \"Bearer \".concat(localStorage.getItem(\"token\"));\n        axios.get('http://localhost:9000/api/auth/unpackToken').then(function (Response) {\n          console.log(Response.data);\n          commit('SET_USER_REFRESH', Response.data);\n        }).catch(function (Error) {\n          console.log(Error);\n          console.log('unpackToken_error');\n        });\n      });\n    }\n  }\n});","map":{"version":3,"sources":["C:/Users/l6-morning/Documents/work12/project1/src/project1/src/store/index.js"],"names":["Vue","Vuex","Route","axios","router","use","Store","state","Userinfo","User_Id","User_Name","User_auth","User_token","boardlist","board","bTitle","bContent","UserList","article","SurveyList","Survey","sTitle","sDescription","questions","SurveyDetail","sId","sWriter","sDatetime","Answers","Response","mutations","NewUsers","payload","push","SET_USER","data","username","name","authorities","token","READ_USER_LIST","WRITE","READ_BOARD_LIST","READ_ARTICLE","bId","console","log","READ_SURVEY_LIST","surveylist","INSERT_TOKEN","localStorage","getItem","SET_USER_REFRESH","logout","removeItem","getSurveyList","updateAnswer","qindex","answers","index","answer","value","updateQuestion","q","updatesTitle","updatesDescription","updateOptions","GET_SURVEYDETAIL","update_S_num","update_SingleAnswer","update_MultipleAnswer","GET_SURVEYRESULTS","actions","loginProcess","commit","Promise","resolve","reject","post","then","defaults","headers","common","setItem","catch","Error","SignUp","alert","admin","get","CreateSurvey","writeaction","formData","FormData","append","url","method","Date","getTime","UnpackToken"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport Route from '../router/index'\nimport axios from 'axios'\nimport router from '../router/index'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    Userinfo:{User_Id:null,User_Name:null,User_auth:[],User_token:null},\n    boardlist:[],\n    board:[{bTitle:' ', bContent:' '}],\n    UserList:[],\n    article:[],\n    SurveyList:[],\n    Survey: { sTitle: '', sDescription:'', questions: []},\n    SurveyDetail: { sId:'', sTitle:'', sDescription:'',sWriter:'', sDatetime:'', questions:[]},\n    Answers: {sId:'', questions:[]},\n    Response: {sId:'', questions:[]}\n  },\n  mutations: {\n    NewUsers: (state,payload) => {\n      state.UserList.push(payload)\n      Route.push(\"/login\")\n    },\n    SET_USER(state, data) {\n      state.Userinfo.User_Id = data.username\n      state.Userinfo.User_Name = data.name\n      state.Userinfo.User_auth = data.authorities\n      state.Userinfo.User_token = data.token\n      Route.push(\"/user\")\n  },\n    READ_USER_LIST(state,data) {\n      state.UserList = data\n    },\n    WRITE(state,data) {\n      state.Userinfo = data\n    },\n    READ_BOARD_LIST(state,data) {\n      state.boardlist = data\n    },\n    READ_ARTICLE(state,data) {\n      state.article.bId = data.bId\n      state.article = data\n      console.log(state.article)\n    },\n    READ_SURVEY_LIST(state,data) {\n      state.surveylist = data\n    },\n  INSERT_TOKEN(state) {\n    state.Userinfo.User_token = localStorage.getItem(\"token\")\n  },\n  SET_USER_REFRESH(state,data) {\n   state.Userinfo.User_Id = data.username\n   state.Userinfo.User_Name = data.name\n   state.Userinfo.User_auth = data.authorities\n   state.Userinfo.User_token = data.token\n  },\n  logout(state) {\n   state.Userinfo.User_Id = null\n   state.Userinfo.User_Name = null\n   state.Userinfo.User_auth = null\n   state.Userinfo.User_token = null\n   localStorage.removeItem(\"token\")\n   console.log(state.Userinfo)\n   console.log(\"Logout\"+localStorage.getItem(\"token\"))\n  },\n  getSurveyList(state, data) {\n    state.SurveyList = data\n  },\n  updateAnswer(state, data) {\n    state.Survey.questions[data.qindex].answers[data.index].answer = data.value\n  },\n  updateQuestion(state, data) {\n    state.Survey.questions[data.index].q = data.value\n  },\n  updatesTitle(state, data) {\n    state.Survey.sTitle = data\n  },\n  updatesDescription(state, data) {\n    state.Survey.sDescription = data\n  },\n  updateOptions(state, data) {\n    state.Survey.questions[data.index].answers = data.value\n  },\n  GET_SURVEYDETAIL(state, data) {\n    state.SurveyDetail = data\n  },\n  update_S_num(state, data) {\n    state.Answers.sId = data\n  },\n  update_SingleAnswer(state, data) {\n    state.Answers.questions[data.index].answers[0] = data.value\n  },\n  update_MultipleAnswer(state, data) {\n    state.Answers.questions[data.index].answers = data.value\n  },\n  GET_SURVEYRESULTS(state, data) {\n    state.Response.sId = data.sId\n    state.Response.questions = data.questions\n  }\n },\n  actions: {\n    loginProcess({ commit }, payload) {\n      console.log(payload)\n      return new Promise((resolve, reject) => {\n          axios.post('http://localhost:9000/api/auth/signin', payload)\n              .then(Response => {\n                  console.log(Response.data)\n                  if (Response.data.username != null) {\n                      axios.defaults.headers.common['Authorization'] = `Bearer ${Response.data.token}`\n                      localStorage.setItem(\"token\",Response.data.token)\n                      commit('SET_USER', Response.data)   \n                  }\n              })\n              .catch(Error => {\n                  console.log('error')\n                  reject(Error)\n              })\n      })\n   },\n   SignUp({commit},payload) {\n    console.log(payload)\n    return new Promise((resolve, reject) => {\n        axios.post('http://localhost:9000/api/auth/signup', payload)\n            .then(Response => {\n                console.log(Response.data)\n                if(Response.data === \"success\") {\n                  Route.push(\"/login\")\n                }\n            })\n            .catch(Error => {\n                console.log('error')\n                reject(Error)\n                alert(\"아이디가 중복\")\n                Route.push(\"/signup\")\n            })\n    })\n   },\n   admin({commit,state}) {\n    return new Promise((resolve, reject) => {\n      axios.defaults.headers.common['Authorization'] = `Bearer ${state.Userinfo.User_token}`\n      axios.get('http://localhost:9000/api/admin/adminPage')\n          .then(Response => {\n            console.log(Response.data)\n             commit('READ_USER_LIST',Response.data)\n          })\n          .catch(Error => {\n            // console.log(Error)\n              console.log('admin_error')\n              Route.push(\"/\")\n          })\n  })\n  },\n  board({commit},payload) {\n    return new Promise((resolve,reject) => {\n      axios.get('http://localhost:9000/api/board', payload)\n        .then(Response => {\n          console.log(Response.data)\n            commit('READ_BOARD_LIST',Response.data)\n        })\n        .catch(Error => {\n          console.log('error')\n          reject(Error)\n        })\n    })\n  },\n  Survey({commit}) {\n    return new Promise((resolve,reject) => {\n      axios.get('https://localhost:9000/api/survey', payload)\n      .then(Response => {\n        console.log(Response.data)\n        commit('GET_SURVEY_LIST', Response.data)\n      })\n      .catch(Error=> {\n        console.log('error')\n        reject(Error)\n      })\n    })\n  },\n  CreateSurvey({state, commit}) {\n    return new Promise((resolve, reject) => {\n    console.log(state.Survey)\n    axios.defaults.headers.common['Authorization'] = `Bearer ${localStorage.getItem(\"token\")}`\n    axios.post('http://localhost:9010/api/auth/survey', state.Survey)\n      .then(Response => {\n        commit('GET_SURVEYLIST', Response.data)\n        Route.push(\"/surveylist\")\n      })\n      .catch(Error => {\n        reject(Error)\n        console.log('CreateSurvey_error')\n      })\n    })\n  },\n  article({commit},payload) {\n    //var obj= {bId: router.currentRoute.params.bId}\n    //payload = obj\n    console.log(payload)\n    return new Promise((resolve,reject) => {\n      axios.get('http://localhost:9000/api/article', payload)\n        .then(Response => {\n          console.log(Response.data)\n            commit('READ_ARTICLE',Response.data)\n        })\n        .catch(Error => {\n          console.log('error')\n          reject(Error)\n        })\n    })\n  },\n  /*writeaction({commit},payload) {\n    console.log(payload)\n   // let formData= new FormData()\n    //formData.append('bTitle', payload.bTitle)\n    //formData.append('bContent', payload.bContent)\n    //formData.append('file', payload.fileinput)\n    //console.log(formData) \n    return new Promise((resolve, reject) => {\n      axios.post('http://localhost:9000/api/writeaction',\n       payload \n      )\n        .then(Response => {\n          console.log(Response.data)\n          alert('게시글이 등록되었습니다.')\n         .then(() => Route.push({name : 'board'}))\n        })\n        .catch(Error => {\n          console.log('error')\n          reject(Error)\n          alert('게시글 등록 실패')\n        })\n    })\n  },*/\n\n  writeaction({commit},payload) {\n    console.log(payload)\n    let formData= new FormData()\n    formData.append('bTitle', payload.bTitle)\n    formData.append('bContent', payload.bContent)\n    //formData.append('file', payload.fileinput)\n    console.log(formData) \n    return new Promise((resolve, reject) => {\n        axios({\n          url: \"http://localhost:9000/api/writeaction\",\n          method: \"post\",\n          headers: {\n            \"Content-Type\": \"multipart/formdata; boundary = \" + new Date().getTime()\n          },\n          data: formData,\n        }).then(Response => {\n          console.log(Response.data)\n          alert('게시글이 등록되었습니다.')\n         .then(() => Route.push({name : 'board'}))\n        })\n        .catch(Error => {\n          console.log('error')\n          reject(Error)\n          alert('게시글 등록 실패')\n        })\n    })\n  },\n/* axios.post('http://localhost:9000/api/writeaction', formData, {\n          headers: {\n            \"Content-Type\": \"multipart/form-data; boundary = \" + new Date().getTime()\n          }\n      }) */\n   UnpackToken({commit}) {\n    return new Promise((resolve, reject) => {\n      axios.defaults.headers.common['Authorization'] = `Bearer ${localStorage.getItem(\"token\")}`\n      axios.get('http://localhost:9000/api/auth/unpackToken')\n          .then(Response => {\n            console.log(Response.data)\n            commit('SET_USER_REFRESH',Response.data)\n          })\n          .catch(Error => {\n            console.log(Error)\n              console.log('unpackToken_error')\n          })\n  })\n  }\n}})"]},"metadata":{},"sourceType":"module"}