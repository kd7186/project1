{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport Route from '../router/index';\nimport axios from 'axios';\nimport router from '../router/index';\nimport { fileURLToPath } from 'url';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    Userinfo: {\n      User_Id: null,\n      User_Name: null,\n      User_auth: [],\n      User_token: null\n    },\n    boardlist: [],\n    UserList: [],\n    article: []\n  },\n  mutations: {\n    NewUsers: function NewUsers(state, payload) {\n      state.UserList.push(payload);\n      Route.push(\"/login\");\n    },\n    SET_USER: function SET_USER(state, data) {\n      state.Userinfo.User_Id = data.username;\n      state.Userinfo.User_Name = data.name;\n      state.Userinfo.User_auth = data.authorities;\n      state.Userinfo.User_token = data.token;\n      Route.push(\"/user\");\n    },\n    READ_USER_LIST: function READ_USER_LIST(state, data) {\n      state.UserList = data;\n    },\n    WRITE: function WRITE(state, data) {\n      state.Userinfo = data;\n    },\n    READ_BOARD_LIST: function READ_BOARD_LIST(state, data) {\n      state.boardlist = data;\n    },\n    READ_ARTICLE: function READ_ARTICLE(state, data) {\n      state.article.bId = data.bId;\n      state.article = data;\n      console.log(state.article);\n    },\n    INSERT_TOKEN: function INSERT_TOKEN(state) {\n      state.Userinfo.User_token = localStorage.getItem(\"token\");\n    },\n    SET_USER_REFRESH: function SET_USER_REFRESH(state, data) {\n      state.Userinfo.User_Id = data.username;\n      state.Userinfo.User_Name = data.name;\n      state.Userinfo.User_auth = data.authorities;\n      state.Userinfo.User_token = data.token;\n    },\n    logout: function logout(state) {\n      state.Userinfo.User_Id = null;\n      state.Userinfo.User_Name = null;\n      state.Userinfo.User_auth = null;\n      state.Userinfo.User_token = null;\n      localStorage.removeItem(\"token\");\n      console.log(state.Userinfo);\n      console.log(\"Logout\" + localStorage.getItem(\"token\"));\n    }\n  },\n  actions: {\n    loginProcess: function loginProcess(_ref, payload) {\n      var commit = _ref.commit;\n      console.log(payload);\n      return new Promise(function (resolve, reject) {\n        axios.post('http://localhost:9000/api/auth/signin', payload).then(function (Response) {\n          console.log(Response.data);\n\n          if (Response.data.username != null) {\n            axios.defaults.headers.common['Authorization'] = \"Bearer \".concat(Response.data.token);\n            localStorage.setItem(\"token\", Response.data.token);\n            commit('SET_USER', Response.data);\n          }\n        }).catch(function (Error) {\n          console.log('error');\n          reject(Error);\n        });\n      });\n    },\n    SignUp: function SignUp(_ref2, payload) {\n      var commit = _ref2.commit;\n      console.log(payload);\n      return new Promise(function (resolve, reject) {\n        axios.post('http://localhost:9000/api/auth/signup', payload).then(function (Response) {\n          console.log(Response.data);\n\n          if (Response.data === \"success\") {\n            Route.push(\"/login\");\n          }\n        }).catch(function (Error) {\n          console.log('error');\n          reject(Error);\n          alert(\"아이디가 중복\");\n          Route.push(\"/signup\");\n        });\n      });\n    },\n    admin: function admin(_ref3) {\n      var commit = _ref3.commit,\n          state = _ref3.state;\n      return new Promise(function (resolve, reject) {\n        axios.defaults.headers.common['Authorization'] = \"Bearer \".concat(state.Userinfo.User_token);\n        axios.get('http://localhost:9000/api/admin/adminPage').then(function (Response) {\n          console.log(Response.data);\n          commit('READ_USER_LIST', Response.data);\n        }).catch(function (Error) {\n          // console.log(Error)\n          console.log('admin_error');\n          Route.push(\"/\");\n        });\n      });\n    },\n    write: function write(_ref4, payload) {\n      var commit = _ref4.commit;\n      return new Promise(function (resolve, reject) {\n        axios.get('http://localhost:9000/api/board', payload).then(function (Response) {\n          console.log(Response.data);\n          commit('READ_BOARD_LIST', Response.data);\n        }).catch(function (Error) {\n          console.log('error');\n          reject(Error);\n        });\n      });\n    },\n    board: function board(_ref5, payload) {\n      var commit = _ref5.commit;\n      return new Promise(function (resolve, reject) {\n        axios.get('http://localhost:9000/api/board', payload).then(function (Response) {\n          console.log(Response.data);\n          commit('READ_BOARD_LIST', Response.data);\n        }).catch(function (Error) {\n          console.log('error');\n          reject(Error);\n        });\n      });\n    },\n    article: function article(_ref6, payload) {\n      var commit = _ref6.commit;\n      //var obj= {bId: router.currentRoute.params.bId}\n      //payload = obj\n      console.log(payload);\n      return new Promise(function (resolve, reject) {\n        axios.get('http://localhost:9000/api/article', payload).then(function (Response) {\n          console.log(Response.data);\n          commit('READ_ARTICLE', Response.data);\n        }).catch(function (Error) {\n          console.log('error');\n          reject(Error);\n        });\n      });\n    },\n    writeaction: function writeaction(_ref7, payload) {\n      var commit = _ref7.commit;\n      var formData = new FormData();\n      formData.append('file', payload.fileinput);\n      formData.append('bId', payload.bId);\n      formData.append('bContent', payload.bContent);\n      formData.append('bWriter', payload.bWriter);\n      return new Promise(function (resolve, reject) {\n        axios.post('http://localhost:9000/api/writeaction', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        }).then(function (Response) {\n          console.log(Response.data);\n          commit('READ_BOARD_LIST', Response.data);\n          alert('게시글이 등록되었습니다.');\n        }).catch(function (Error) {\n          console.log('error');\n          reject(Error);\n          alert('게시글 등록 실패').then(function () {\n            return router.push({\n              name: 'ProductRegistration'\n            });\n          });\n        });\n      });\n    },\n    UnpackToken: function UnpackToken(_ref8) {\n      var commit = _ref8.commit;\n      return new Promise(function (resolve, reject) {\n        axios.defaults.headers.common['Authorization'] = \"Bearer \".concat(localStorage.getItem(\"token\"));\n        axios.get('http://localhost:9000/api/auth/unpackToken').then(function (Response) {\n          console.log(Response.data);\n          commit('SET_USER_REFRESH', Response.data);\n        }).catch(function (Error) {\n          console.log(Error);\n          console.log('unpackToken_error');\n        });\n      });\n    }\n  }\n});","map":{"version":3,"sources":["C:/Users/l6-morning/Documents/work12/project1/src/project1/src/store/index.js"],"names":["Vue","Vuex","Route","axios","router","fileURLToPath","use","Store","state","Userinfo","User_Id","User_Name","User_auth","User_token","boardlist","UserList","article","mutations","NewUsers","payload","push","SET_USER","data","username","name","authorities","token","READ_USER_LIST","WRITE","READ_BOARD_LIST","READ_ARTICLE","bId","console","log","INSERT_TOKEN","localStorage","getItem","SET_USER_REFRESH","logout","removeItem","actions","loginProcess","commit","Promise","resolve","reject","post","then","Response","defaults","headers","common","setItem","catch","Error","SignUp","alert","admin","get","write","board","writeaction","formData","FormData","append","fileinput","bContent","bWriter","UnpackToken"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport Route from '../router/index'\nimport axios from 'axios'\nimport router from '../router/index'\nimport { fileURLToPath } from 'url'\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    Userinfo:{User_Id:null,User_Name:null,User_auth:[],User_token:null},\n    boardlist:[],\n    UserList:[],\n    article:[]\n  },\n  mutations: {\n    NewUsers: (state,payload) => {\n      state.UserList.push(payload)\n      Route.push(\"/login\")\n    },\n    SET_USER(state, data) {\n      state.Userinfo.User_Id = data.username\n      state.Userinfo.User_Name = data.name\n      state.Userinfo.User_auth = data.authorities\n      state.Userinfo.User_token = data.token\n      Route.push(\"/user\")\n  },\n    READ_USER_LIST(state,data) {\n      state.UserList = data\n    },\n    WRITE(state,data) {\n      state.Userinfo = data\n    },\n    READ_BOARD_LIST(state,data) {\n      state.boardlist = data\n    },\n    READ_ARTICLE(state,data) {\n      state.article.bId = data.bId\n      state.article = data\n      console.log(state.article)\n    },\n  INSERT_TOKEN(state) {\n    state.Userinfo.User_token = localStorage.getItem(\"token\")\n  },\n  SET_USER_REFRESH(state,data) {\n   state.Userinfo.User_Id = data.username\n   state.Userinfo.User_Name = data.name\n   state.Userinfo.User_auth = data.authorities\n   state.Userinfo.User_token = data.token\n  },\n  logout(state) {\n   state.Userinfo.User_Id = null\n   state.Userinfo.User_Name = null\n   state.Userinfo.User_auth = null\n   state.Userinfo.User_token = null\n   localStorage.removeItem(\"token\")\n   console.log(state.Userinfo)\n   console.log(\"Logout\"+localStorage.getItem(\"token\"))\n  }\n },\n  actions: {\n    loginProcess({ commit }, payload) {\n      console.log(payload)\n      return new Promise((resolve, reject) => {\n          axios.post('http://localhost:9000/api/auth/signin', payload)\n              .then(Response => {\n                  console.log(Response.data)\n                  if (Response.data.username != null) {\n                      axios.defaults.headers.common['Authorization'] = `Bearer ${Response.data.token}`\n                      localStorage.setItem(\"token\",Response.data.token)\n                      commit('SET_USER', Response.data)   \n                  }\n              })\n              .catch(Error => {\n                  console.log('error')\n                  reject(Error)\n              })\n      })\n   },\n   SignUp({commit},payload) {\n    console.log(payload)\n    return new Promise((resolve, reject) => {\n        axios.post('http://localhost:9000/api/auth/signup', payload)\n            .then(Response => {\n                console.log(Response.data)\n                if(Response.data === \"success\") {\n                  Route.push(\"/login\")\n                }\n            })\n            .catch(Error => {\n                console.log('error')\n                reject(Error)\n                alert(\"아이디가 중복\")\n                Route.push(\"/signup\")\n            })\n    })\n   },\n   admin({commit,state}) {\n    return new Promise((resolve, reject) => {\n      axios.defaults.headers.common['Authorization'] = `Bearer ${state.Userinfo.User_token}`\n      axios.get('http://localhost:9000/api/admin/adminPage')\n          .then(Response => {\n            console.log(Response.data)\n             commit('READ_USER_LIST',Response.data)\n          })\n          .catch(Error => {\n            // console.log(Error)\n              console.log('admin_error')\n              Route.push(\"/\")\n          })\n  })\n  },\n  write({commit},payload) {\n    return new Promise((resolve,reject) => {\n      axios.get('http://localhost:9000/api/board', payload)\n        .then(Response => {\n          console.log(Response.data)\n            commit('READ_BOARD_LIST',Response.data)\n        })\n        .catch(Error => {\n          console.log('error')\n          reject(Error)\n        })\n    })\n  },\n  board({commit},payload) {\n    return new Promise((resolve,reject) => {\n      axios.get('http://localhost:9000/api/board', payload)\n        .then(Response => {\n          console.log(Response.data)\n            commit('READ_BOARD_LIST',Response.data)\n        })\n        .catch(Error => {\n          console.log('error')\n          reject(Error)\n        })\n    })\n  },\n  article({commit},payload) {\n    //var obj= {bId: router.currentRoute.params.bId}\n    //payload = obj\n    console.log(payload)\n    return new Promise((resolve,reject) => {\n      axios.get('http://localhost:9000/api/article', payload)\n        .then(Response => {\n          console.log(Response.data)\n            commit('READ_ARTICLE',Response.data)\n        })\n        .catch(Error => {\n          console.log('error')\n          reject(Error)\n        })\n    })\n  },\n  writeaction({commit},payload) {\n    let formData = new FormData()\n    formData.append('file', payload.fileinput)\n    formData.append('bId', payload.bId)\n    formData.append('bContent', payload.bContent)\n    formData.append('bWriter', payload.bWriter)\n    \n    return new Promise((resolve, reject) => {\n      axios.post('http://localhost:9000/api/writeaction',\n        formData,\n        {\n            headers: {\n              'Content-Type': 'multipart/form-data'\n            }\n        })\n        .then(Response => {\n          console.log(Response.data)\n          commit('READ_BOARD_LIST', Response.data)\n          alert('게시글이 등록되었습니다.')\n        })\n        .catch(Error => {\n          console.log('error')\n          reject(Error)\n          alert('게시글 등록 실패')\n          .then(() => router.push({name:'ProductRegistration'}))\n        })\n    })\n  },\n   UnpackToken({commit}) {\n    return new Promise((resolve, reject) => {\n      axios.defaults.headers.common['Authorization'] = `Bearer ${localStorage.getItem(\"token\")}`\n      axios.get('http://localhost:9000/api/auth/unpackToken')\n          .then(Response => {\n            console.log(Response.data)\n            commit('SET_USER_REFRESH',Response.data)\n          })\n          .catch(Error => {\n            console.log(Error)\n              console.log('unpackToken_error')\n          })\n  })\n  }\n}})"]},"metadata":{},"sourceType":"module"}